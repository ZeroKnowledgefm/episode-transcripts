Anna Rose (00:05):
Welcome to Zero Knowledge. I'm your host, Anna Rose. In this podcast, we will be exploring the latest in Zero Knowledge research and the decentralized web, as well as new paradigms that promise to change the way we interact and transact online.

Anna Rose (00:27):
This week, I chat with Zaki Manian a long-standing member of the Cosmos community and the co-founder of the iqulsion validator. In this chat, we explore his new project, Sommelier and how they aim to develop strategies to better use the more sophisticated emerging DeFi projects like Uniswap V3, and how this would allow an average user to actually benefit from these new powerful tools. We chat about his vision for multichain DeFi and how the spaces evolved over the last few years. But before we start in, I want to let you know about ZK Hack, a multi round weekly online event, consisting of workshops and puzzle solving competitions. This is put together by the podcast and the ZKValidator, and it's supported by a group of fantastic sponsors. It will kick off a weekly cadence starting October 26th. Think Hackathon meets CTF meets Dark Forest round-based competition. There will be a leaderboard and prizes and deep dive learning sessions with the best teams in the space. This is the event that we're putting together this fall, and I hope you will check it out. If you're interested, do head over to the website now and sign up. If you've already signed up, we will be in touch with you shortly with more details about the event. I also want to thank this week sponsor Anoma. Anoma is a multi-variate and multi-variable bartering protocol that enables bartering among end parties of arbitrary assets, including NFTs all with zero knowledge privacy. Anoma makes large-scale settlements extremely efficient as the design of a Anoma state machine is not based on step-by-step execution model. And it removes the requirements of double coincidence of wants or direct matches. I've added a link to co-founder Awaâ€™s Twitter thread in the show notes, where she goes into more detail about this project. Quick note, we did have Adrian on the show back in June, in case you want to learn more. And since that recording the ZKValidator has become an investor in the project. So be sure to stay tuned for Anoma's first public Testnet in which you will be able to play with Anoma's proof of stake intent gossip/matchmaking layer, and custom validity predicates. Also check a Anoma's codebase on GitHub, and just to note, the team building Anoma is hiring. So if you're interested in finding out more, check the links in the show notes for their jobs. So thank you again Anoma. Now here's my conversation with Zaki.

Anna Rose (02:44):
So today I'm here with Zaki Manian the co-founder of Sommelier, Cosmos Core from the validator iqlusion. Welcome back to the show Zaki.

Zaki Manian (02:54):
It's great to be back as always. This is my favorite show. It's my favorite podcast.

Anna Rose (03:01):
This is the third time you're on the show. I think it was like two years ago. We did an episode mostly focused on your work at Iqlusion. I believe like validation and Cosmos. You were on another episode this year where it was like a combo episode, all about the Cosmos / Stargate upgrade. But today we're going to be focusing on your new project, Sommelier? Sommelier, cool. So, yeah, but why don't you tell us a little bit what you've been up to if you want, we could even start in on that. Like, what is Sommelier and also like, how does this in any way connect to the other work you've been doing? I'd love to hear like your journey to this, kind of...

Zaki Manian (03:42):
Absolutely. Let's talk about, let's talk about the journey that has brought Sommelier to this point. So I think one of the questions has been, you know, I probably have had this opinion for a very long time, which is like, what is the Cosmos stack uniquely for on, and how does it fit into this like ecosystem of blockchains? And I've sort of been less excited about sort of building another Ethereum. It's been, you know, I think that that dream of building, like building another area and building a better Ethereum has been kind of very pervasive. And there's certainly, you know, people in the Cosmos ecosystem who have that dream but that's never been my dream. My dream has always been, I've been very fascinated by this idea that chains could compose together that there are going to be different chains, which have different strengths and weaknesses. And we can actually sort of meld them together in order to build like more complex systems. And that's always been what's, what's exciting to me. And Sommelier is a sort of manifestation of that vision and sort of manifesting sort of post DeFi summer which is kinda like where I'm at right now. And it's funny, you know, we just finished mainnet in New York, which, you know, is this sort of interesting conference. It was, for me, it was my first conference since the beginning of the pandemic. It's very interesting to me, like going to these conferences and seeing like all of these new generations of people who come into the blockchain space and I'm kind of the elder generation of people who like built like consensus protocols and L1 infrastructure and like, you know, that layer of the system.

Anna Rose (05:38):
I'm wondering like the first episode that we did was all about, as far as I remember, it was all about iqlusion and being a validator and all of that. So I'm curious, like, what is the relationship you Sommelier as a new project, is this a related project? Does it come out of your work doing validation, or do you feel like there was other influences that prompted this?

Zaki Manian (05:58):
I mean, a big part of what we're trying to do in Sommelier is we are trying to show how validators can move up the value chain. Like that's a big part of it because DeFi, DeFi, changes the nature of validation. I think that's like one of the biggest sort of views that we have in Sommelier project that I have a view in general, where it's like really the business of doing of just, you know, executing the Consensus protocol is sort of fairly commoditized. Right. and so what you actually are seeing more and more in sort of the emerging validation business is more, you know, sections between DeFi and Validation. And so, you know, one example I could point at would be like Lido, where you have this like community of validators, but like what they're building is fundamentally like, you know, a staking derivative, a liquid staking primitive, and how it interacts with Ethereum DeFi and sort of the validation part of, you know, validating ETH 2.0 is more of a implementation detail of how this like larger system of a financial primitive that you know, is designed to be, you know, sort of based on ETH2 staking, but is essentially supposed to be, you know, one for one equivalent to eat and may someday displace ETH as the unit of account inside of the Ethereum ecosystem.

Anna Rose (07:34):
So it's this idea of like building up the stack, like the actual validation. I mean, this came up like, what was it like two years ago? It was like, I think some Tarun's work this idea that like the staking derivative of a staked token could actually potentially undermine the strength of the network. If the liquid token started to offer better rewards in the DeFi market. And I remember that being like a worry, and it's sort sounds like there's validators or validator like entities that are starting to try to bridge that maybe, or like try to make sure that they can continue to balance this out correctly.

Zaki Manian (08:07):
So, you know, it's like one of the things that you just generally see is right. It's like, again, the validator market is evolving. You know, if you look at like sort of the primordial Cosmos validator set from the beginning, every one of them has gone in different directions. You know, like Certus One who is like one of the earliest independent validators was acquired by Jump Trading in some sense, like that was obviously going to happen. But like that is like very clearly like, look, one of the formative and most highly skilled validators in system is already been acquired by like, what is primarily a market making and trading firm.

Anna Rose (08:45):
And then you have Bison Trails who was also acquired by Coinbase.

Zaki Manian (08:49):
Bison Trails was acquired by Coinbase. Figment has raised lots of money is part of like a bunch of like protocol dev grants. And they have also have a fund. You are seeing the early validators, all migrating into these different parts of the stack. And Sommelier is really saying validators can facilitate a marketplace of sort of DeFi data feeds that can be executed on different chains where there's DeFi activity happening and really facilitate accessibility of the increasing complexity of DeFi. We are still in the early simple era of DeFi but we are starting to see a transition into this more complex world. And Sommelier is trying to build a set of primitives for that more complex world of DeFi that leverages the increasing capability and skill sets of validators and like still provides like sort of democratized access to DeFi primitives and protocols. I think the biggest risk, you know, right now that I see to sort of democratize access to DeFi, you know, be cut off for regulatory reasons and more that as sort of natural protocol competitions sort of continues to move like interacting with these protocols become so complex that people are like, well, I just can't keep up. And it's all institutional players who are able to. And so in many ways with Sommelier is trying to do is build a decentralized liquidity management institution, which is kind of where the name comes from.

Anna Rose (10:33):
Tell me about the name isn't that the wine guy at the restaurant?

Zaki Manian (10:37):
Sommelier is there to help a consumer you know, navigate the complex world of wine and sort of get the best out of their experience.

Anna Rose (10:48):
Got it. And so this is like the curator, the person who's going to lead you to the best that you can do.

Zaki Manian (10:54):
Lead you and help you deploy your liquidity in the way that gets you the best experience. What we are trying to do is we're trying to build an architecture that facilitates this.

Anna Rose (11:06):
I do wonder though, like, you know, we just talked about sort of this, the validators moving up and starting to build out more tools, having been a validator, does it position you differently than had you been like a new DeFi project that's just coming on? Like, do you see any sort of learnings or anything that you kind of brought with you in the design of this?

Zaki Manian (11:25):
This is what I would kind of portray as the sort of asymmetric advantage of the Sommelier team is, you know, a number of us who are building Sommelier run validators, Jack runs a validator, I run a validator. You know, we have people in the team, we have people who are data people, who are DeFi people, we run like a phenomenal amount of infrastructure in the project. And one of the things that is like, sort of notable among like sort of, again, this like generation that is certainly coming to this project is the infrastructure is all provided for them. And they're trying to figure out what is it that can be built on top of everything from, you know, indexing protocols, like the graph you have all of these like frameworks that exist. You have smart contract execution environments, and a lot of DeFi has been about what can you execute, assuming these pieces of infrastructure by sort of having this team that is short of a little bit more used to building infrastructure from the ground up, we're attempting something that is a little bit more challenging in the DeFi space, and I think if we're successful - important.

Anna Rose (12:36):
Got it. I want to like link this to Cosmos itself, too. You were talking about like this cross chain, this like Sommelier, helping you deploy liquidity, but is it cross chain? Does it live across a bunch of places? And it's like this standalone entity, or does it live on top of an existing network?

Zaki Manian (12:55):
The core logic of Sommelier is truly cross-chain. And that's like, one of the things that I think is fun and exciting and challenging about what it is that we're building. We are building a truly integrated system in which there is a part of it that lives on right now, EVM chains and Ethereum mainnet itself. But we want to scale out to all of the L2s and it's relatively doable to do this, but, you know, the scalability work that we announced recently with Mysten Labs is all about ensuring that we have enough scaling in the Cosmos stack to support, you know, a large number of different EVM execution environments. So like, but this is what's cool is it's like the unique skillset of the Som team is able to allow us to do this, which is providing user experience. That is if you are a liquidity provider who's interacting with Som you don't experience interacting with the Cosmos, you experienced interacting with Ethereum or another EVM

Anna Rose (13:53):
EVM. Okay. Going back to this underneath it, is it kind of like a zone?

Zaki Manian (13:59):
It is a zone, it is an L1.

Anna Rose (14:00):
Okay. It's an L1, it's a zone. Would you see this as like a bridging zone?

Zaki Manian (14:06):
So again, the bridging functionality is an implementation detail. You know, what is the user experience that someone experiences interacting with Sommelier, which is they experience, there are a set of sellers on their Ethereum environment that they're in. They say, I want to provide liquidity into this Uniswap V3, you know, pair with this strategy. I want to provide liquidity into this Aave contract with this strategy. And then from their point of view, they're just putting money into a smart contract. They're putting resources into a smart contract. And behind the scenes, the validator set is, you now, ensuring that like data continues to flow into the system, that there is fault tolerance, that there is a marketplace of data providers. Those data providers vote on the next updates, the actions that the smart contract will take. And then the bridge ensures that those actually get delivered and executed on the Ethereum side.

Anna Rose (15:10):
Is it sort of like all of these EVMs? So you'd have a bridge between the EVM chains or EVM compatible-chains and Ethereum to Sommelier.

Zaki Manian (15:17):
So one of the things that is, so there's this bridge technology that has been gestating in the Cosmos for years that we are using, which is called the Gravity Bridge. And you know, we're not the only ones using it. Injective has it running in production right now. We have it running in production right now. There are a bunch of other chains that are adopting and watching with the gravity bridge technology gets sort of, again, it's the Cosmos strategy of we build like a foundational piece of technology, and then it manifests in a bunch of different chains for a bunch of different applications that is sort of core to my nature as a builder in this space that I like to build things that way. So one of the things that about the Gravity Bridge that I think is very cool is it was designed from the ground up to be agnostic about what EVM it's connected to. Cause we always anticipated that there would be lots of EVMs to connect to. And lo and behold, there we are, you know, that's why we picked the Gravity Bridge for Sommelier and like why we've been invested in it, we've been a big part of helping sort of build the Gravity technology for the last 18 months because we want it to be able to be agnostic about what EVM we ended up deploying it too.

Anna Rose (16:35):
Understood. As it stands. Like, do you plan on using IBC as well to interact with the other zones? Or is this not currently? Cause it sounds like it's very EVM focused. It's very much focused on like the existing DeFi stack that tends to live on EVMs compatible chains.

Zaki Manian (16:49):
You know, what is Sommelier need in order to in order to kind of what is a good target for Sommelier execution environment? So again, right now, Sommelier is not concerned with doing any sort of DeFi execution. ie having liquidity, you know, people trading, et cetera, on the Sommelier chain, it's focused primarily on being a marketplace for data flowing through Sommelier to execution somewhere else. I see, just to answer your question about how we think about IBC, what we need is there to be sort of the higher end of complexity of DeFi protocols to sort of start existing. I eat where there are, there are multiple knobs to turn when you're providing liquidity. If the system is still in it's in sort of the earlier stages of DeFi evolution, it's not really compelling to add Sommelier as a layer.

Anna Rose (17:52):
Understood. Does it have something to do a little bit with this? Like almost like Uniswap V2 versus Uniswap V3, like Uniswap V2 being quite simple and maybe we're starting to see parts of that or like maybe more simple DeFi projects. We see this in Cosmos now or in different zones, but you're not made for those. You're not made for like the kind of easy, like if it's very easy, then maybe it's easier for the user to just use that.

Zaki Manian (18:21):
The easy DeFi way of those. We don't add a lot of value.

Anna Rose (18:22):
Okay. But you might be more useful for the complex stuff. I mean, the only example I have in my mind, cause we had them on the show at some point it was like, you know, Uniswap and V3 and how that was like a more complicated product...

Zaki Manian (18:35):
We view V3 and we view this as the direction DeFi will be pushed by competitiveness. And I think you can see that, you know, SushiSwap announced Trident, which we are very excited about, which has this concentrated liquidity capability that Uniswap V3 also pioneered and basically just the natural competitive pressure of DeFi is going to push the world of user towards that.

Anna Rose (19:05):
And the problem we see sometimes with that, what you just said earlier in this episode, the more complicated it becomes, the less, the kind of average DeFi user or like not very sophisticated DeFi user can actually benefit from these things. It's more likely they're going to lose gas fees are going to not be able to work these strategies unless they had a team maybe, or a lot of funds. I don't know. I don't know which one you need more, but

Zaki Manian (19:29):
When you end up needing is like you need engineering and data teams is really what it is is you as a Uniswap V2 user, there were only two decision points, right? I'm talking about it in the liquidity provider role and the liquidity provider role in the Uniswap V2 world. It was like, I can either put my liquidity in and I can take it out. That's that's the extent of the decision. Now the question is in the Uniswap V3 world, it now becomes a much more interesting question of, I can provide liquidity at different price ranges I can have as a sort of portfolio of positions. I can own multiple different price ranges where I'm providing liquidity in each one of these is going to have different performance characteristics. And now my question is, how do I make a decision? Like how do I make a decision about this? The reality of the situation is there are some simple decisions that users can make that can be guided by data. And we offered that as like an initial sort of business intelligence tool on top of Uniswap V3 that we call Pairings which was sort of just guiding people into like here's a good liquidity range that you might be able to pick. And like honestly, like users did pretty well with that in the market. You know, we had about $10 million of liquidity deployed via the Pairings app and people generated about a million dollars of just fee returns using the Pairings product. You know, Pairings was just sort of our initial stab at building something on top of V3 and learning about it while we continue to build out, you know, the seller's products on top of V3 and we are going to be launching shortly, probably I would say our current target is October. We going to be launching a number of now validator-managed, data feed-managed, Uniswap V3 products, but it's just like the amount of stuff we've had to build. Like we are running custom subgraphs that are extracting custom data feeds that are going into a data warehouse. We have a data science team that is analyzing it. We are constantly evolving that whole peice and picture. And then there's like a bunch of fundamental research about economic primitives because I'm pretty convinced that like the long run actual that if you like, for instance, don't have the ability to put in call options. In addition to liquidity ranges, you can't actually build a market making position on top of Uniswap V3 that is robust. And so it's just like continuous R&D is like, is kind of the story. And if you're like, end-user, you're just like, I can't do any of this. Right. It's like the best strategy for an end user today is like, Hey, like I would be buying ETH like a thousand dollars that I would be selling ETH at $5,000 and I'll stick that range in and it will not be optimal from a feed generation point of view, but you know, it, it does get me earn me some fees and allows me to be essentially like earn yield on being long on ETH.

Anna Rose (22:39):
The first time I heard about the project, the splash across the screen, or the headline was something about impermanent loss and like ending impermanent loss. And I kind of understand from what you described sort of how that was understood, but like, do you actually see it as like actually ending it or minimizing it maybe, or just like helping with strategies?

Zaki Manian (23:03):
I would say that like what happened was so like a first target about what we were building this infrastructure on was Uniswap V2. And so we were building on top of Uniswap V2. We were like happily building on top of Uniswap V2. We knew that like some V3 thing was coming and didn't have any details. You know, everybody was keeping all of the details, pretty close to their vest and then the V3 paper came out and we made sort of this decision right when the V3 paper came out, that we were going to just pivot entirely and, and sort of focus on V3 now, since then, our scope has broadened because of two things. One is V3 and things like it and how to manage liquidity on it is an R&D like rabbit hole.

Anna Rose (23:50):
They're powerful.

Zaki Manian (23:52):
It's very powerful, but it's also like, there's just so much to learn and there's so much research to do. And there's so much right. General work to do. We were launching Aave and Compound-based sellers. In addition to our V3 based sellers and you know, is our prediction that our V3 sellers will be our highest TVL sellers. Probably not. Like we think that will probably generate most of it. Like the biggest TVL sellers, maybe are Aave and Compound sellers, which are a bit more like well-defined and well understood systems. Whereas like V3 is very much like an ongoing R&D project that we are participating in.

Anna Rose (24:32):
Would you almost say you're still developing your own internal strategies for this?

Zaki Manian (24:37):
We are going to launch systems and we are going to launch strategies. And we are going to say that this is represents like kind of the state of the art of our current R&D. But to say that like, we come to something that is like steady state.

Anna Rose (24:50):
Or optimized completely?

Zaki Manian (24:51):
Yeah. It's hard for me to foresee what V3 type world steady state might even look like. I think there's still so many open questions. It is a continuous and interesting R&D project. And we will continue to invest in that R&D but, you know, we view our scope as much broader than just building a V3 rebalancer.

Anna Rose (25:16):
In what you're saying, it's making me think a little bit of like Yearn, but then you mentioned this TVL sellers, this maybe will help me understand a little bit more about like what's actually happening because with Yearn, there are strategies, but you're like investing into a smart contract. That's doing behind the scenes, a lot of like kind of DeFi trades with the liquidity tokens or governance token, selling that for you kind of giving you a cut, saving you gas fees. And we talked about like different strategies happening under the hood in your case, it's not using necessarily the governance tokens. Is it returning funds to people you've said before, it was more focused on like data. So I'm just curious, like, what are these sellers, how does it actually work?

Zaki Manian (25:55):
Yeah. So I would say the biggest way that we are differentiated from what Yearn is doing is if you look at Yearns TVL, Yearns TVL is highly focused on strategies that are basically optimized yield farms. They will optimize your yield farm, they will optimize your stablecoin yield farm for you, so that you aren't just generating the fees, reason like why a Yearn is generating these fees for you is because one they're sort of whitelisted into certain advantages yield farms to begin with, which is basically a biz dev work. And then there's this cascaded sequence of actions that are complex and have to be sort of densely built together. And Yearn just does an extraordinarily good job of putting those pieces together, but they are also fairly like static and stable, right? Like a good Yearn strategy, basically doesn't evolve over time.

Zaki Manian (27:00):
The strategy is basically like fairly static. It's fairly stable. Typically returns sort of tend to tail off as more capital gets invested into a specific strategy. And what Sommelier is trying to do is do things that requires sort of a lot more dynamic adaptation which is not Yearn's strength, Yearn's strength is like stable, predictable, really high quality composability like we will compose these yield farms together. And in a ways that's very advantageous to you. And so far, you know, Sommelier is right now looking less at like, you know, yield farming and governance tokens as our source of, of sort of alpha and more like we can like turn the knobs on this DeFi protocol in the right ways to give you maximum like sort of capital efficiency vis a vis utilization.

Anna Rose (28:01):
And maybe minimize going back to that impermanent loss. Is that still a thing or

Zaki Manian (28:06):
The extent to which, and impermanent loss is a thing in sort of the concentrated liquidity world actually comes down to how you use it. So if you provide sort of wide band liquidity, you do incur impermanent loss over that range. But it's also bounded, right? So like, you know, the thing is, is that like if you provide liquidity over like the 1000 to USDC to 5,000 USDC range, if you go below a thousand dollars is you will be entirely in ETH. And if the price of ETH goes above $5,000, you will be entirely in USDC. So the, the nature of impermanent loss is different. The rebalancers is actually have a far more thorny problem, which sort of doesn't manifest in the V2 world, which is the need, if you want to provide liquidity over a narrower range, you decide to provide liquidity where, you know, ETH is from like 2,500 to $2,800, then ETH goes to 3000. And so now if you want to move your liquidity from like 2,500 to maybe like 2,800 to 2,900, you're not changing the inventory of assets that you hold. You're still only holding USDC. I see. But you're changing the liquidity that you're provided over.

Anna Rose (29:37):
Yeah. I remember, I mean, we did do an episode on Uniswap V3, and I remember learning a little bit about those ranges. I haven't actually had a chance to look that closely at them. It does seem like a beast of a machine that I just haven't,

Zaki Manian (29:50):
It's a fun thing to use though. You know, again, like we have lots of people who've been very nicely earning fees using the tooling that is available. This idea is, is that you incur costs really when you cross the spot price when you move your liquidity across the spot price, that is, this rebalanced cost, this cost of crossing the spot price and having to buy new inventory of tokens is the cost that sort of represents the crux of the R&D that everyone is doing on Uniswap V3, which is how do you manage that? That has become the thing that doesn't have a sort of yet a term that is sort of widely accepted in the industry. But has been a thing in market-making forever, which is like the cost of crossing the spread.

Anna Rose (30:46):
Oh, interesting. If we need a different word, it's just not,

Zaki Manian (30:49):
Yeah. It's not impermanent loss anymore. It is the cost of crossing the spread. And as people try to figure out all of these, like, you know, you're starting to see this type of concentrated liquidity protocol emerging, it's emerging in the PERP market, in decentralized settings, it's emerging in like the sort of hybrid AMM lending markets, like what a SushiSwap is doing with Trident and bento box. And it's emerging where ever Uniswap V3's pop up. And you know, now that you have more permissively, licensed, concentrated liquidity, that like SushiSwap has built with Trident, it's going to pop up everywhere. And so, you know, there's just this like sort of general tidal wave that's coming. It's really fun to build all of that stuff. I don't know. I don't have as much of a desire to build an automated market-maker or Dex myself, but I really like building on top of them. I find them just like utterly fascinating too, like money legos.

Anna Rose (31:51):
Do you feel like you get a bit of a better sense for their, like real world game breakdown, like how it actually works, how the simulation is actually working kind of?

Zaki Manian (32:02):
Yeah. Yeah. You learn so much about how they work. That to a certain extent, I think to a certain extent, like the teams that are building them are somewhat divorced from this reality. They get feedback from, you know, all of the market makers and everyone trying to use them.

Anna Rose (32:22):
So I want to take one step back because there's a word that you've used a couple of times, I want to kind of go back to the seller part of Sommelier like, would I put money into something that you do something, and then you give something back or am I using something from Sommelier and then I put my money else. This is what I'm not clear on.

Zaki Manian (32:40):
There's a set of sellers. Each seller is like a product. So, you know, the seller will provide liquidity into Uniswap or like ETH/USDC on Uniswap V3.

Anna Rose (32:53):
But who is the sellers? The seller, the user?

Zaki Manian (32:56):
Seller is a smart contract on Ethereum.

Anna Rose (32:59):
Oh, okay. So it's not the end user, the seller is the smart contract.

Zaki Manian (33:01):
The seller is the smart contract on Ethereum. Got it. And liquidity is aggregated across many users who get liquidity shares and you know, particular to the seller. There might be some rules about when you can withdraw, when you can add there, you know, different things have different rules, you know, to just sort of, again, optimize for returns. But the idea is, you know, it's very much, you know, it's the Uniswap V2-like experience, right? It's like I put my money in I have a liquidity share. I can redeem that liquidity share for a set of underlying assets. And that is the seller to user experience with some constraints.

Anna Rose (33:41):
Are they depositing that though into individual sellers, are they doing it through you?

Zaki Manian (33:45):
You as a user pick the sellers that you want.

Anna Rose (33:48):
Do you have a UI or something that like... To work on the Sommelier L1, do you need to have Sommelier tokens?

Zaki Manian (33:57):
So if you're using the L1 the L1 is like, you know, you can run a validator, you can participate in governance that decides what new sellers are going to be deployed. You can help shape which data feeds are driving which sellers, it's this sort of governance activity is all moved on to the L1 and that you need Som tokens to really be an active participant on. And you know, right now, you know, the holders of Som tokens, or like some validators, a bunch of like initial project contributors, a bunch of VCs, like those are the, those are the current token holders, but we want to, now that we've launched mainnet that now like gives us the opportunity to sort of expand on the token holder supply as we get into the sort of end of the year.

Anna Rose (34:45):
Cool. I'm just thinking, like, going back to that Yearn example, like Yearn is a Dapp smart contract on Ethereum, and then the governance is also a smart contract on Ethereum. In your case, Sommelier it is a smart contract on EVM and Ethereum, like EVM compatible chains and Ethereum. And then there's a separate chain where the governance is actually happening. And I guess there's data feeds and this is where like the bridging would happen, but there's no token feeds is there?

Zaki Manian (35:13):
This is a little bit of a Cosmos critique of like Ethereum DeFi is because you don't have something like the Gravity Bridge, like governance on Ethereum frequently has to be executed via a multisig. Right. And it depends on the protocol on Ethereum, but like frequently it's like the governance doesn't actually execute its will, itself.

Anna Rose (35:40):
Yes, it's more like a signal.

Zaki Manian (35:42):
Signal that then the multisig goes on and does that. And like one of the things that we've been like really wanting to do with the Gravity Bridge technology has really make, like execute your governance in Cosmos, and the validator set just executes the will of governance on the EVM chain, like directly via the bridge.

Anna Rose (36:03):
Got it. But that doesn't happen yet. What would need to happen on the Ethereum side for something to be executed though?

Zaki Manian (36:11):
What we do is we deploy what is called a logic contract. That's what I'm debugging like right now. There's ADI encoding nonsense that I'm trying to figure out I've got the whole thing printed out and I can see what bytes are wrong. And I'm like, I haven't figured out why, but hopefully by the time this episode is out, I, I fixed that. And we are gleefully executing, arbitrary, smart contracts on Ethereum from Cosmos hub governance.

Anna Rose (36:41):
Cool. How does things like MEV affect what you're doing? Like MEV on different chains, these like special, you know, strategies to either democratize MEV or remove, or like minimize MEV? Like, does that impact in any way your strategies or the way that you're like building this product or the data?

Zaki Manian (37:04):
Yeah. I mean, we, as an industry are still like trying to grapple with L1 MEV as a whole, but interoperability, which has been, you know, a point that, you know, has come up a lot in this sort of flashbots and MEV research community is interoperability is going to create like a whole new layer of MEV in the system. The tricky pieces of Sommelier are both. We have to mitigate MEV where we're executing which is, you know, an ongoing project. And we want to make sure that the MEV, what MEV there is on the Cosmos chain is actually aligned. So that like validators can't manipulate the operations of sellers in ways that are advantages to them. And they're aligned with, you know, I'm not going to lie. This is going to be tricky,

Anna Rose (37:55):
I thought MEV on proof of stake chains wasn't such an issue though.

Zaki Manian (37:59):
Okay. So if you were running a proof of stake chain that offers finality: Avalanche, Cosmos chain Solana, et cetera, the worst thing that can happen with MEV is consensus, instability, right? It's where, like the MEV battle goes on between the different consensus nodes. And they're actually like, no, like they fork the chain to try and figure out. And this is sort of the worst case scenario for MEV . You know, people call it the time bandit attack, where like you, when you see an MEV opportunity that someone else mined, and then you try to mine it yourself and sort of modern proof of stake chains that is less of an issue because you have finality, you know, someone will get slashed for trying to do that. It's, you know, in-chain slashing, you know, it requires a huge fraction of the validators that if you were trying to succeed with it, all of these things, but you still have MEV issues around deciding what transactions to censor and what transactions to include in any given block.

Zaki Manian (39:07):
And there's some really exciting work that the Osmosis and Anoma teams have been spearheading on the Cosmos side about using like encrypted transactions. You know, there's basically like two things that can be done in a proof of stake setting. And these things are interesting because again, they like go to the power of Cosmos to build customized L1s and environments like Cosmos Avalanche, et cetera, that like support this idea of building custom L1s, because you need new services at the L1 layer to fully mitigate or to like to provide these services of MEV mitigation, because having sort of native randomness or having native encryption and decryption primitives where like the validators are all being sent encrypted transactions, which are picked to them, which they then include an only later, you need the validator set, like form a threshold key and decrypt them. These kinds of things are really the power of having sort of native L1 and anti-MEV services in the system. And like, this is why we built the Cosmos. You know, I think probably the first time we started talking about MEV, it was like 2014. So like, you know, and Cosmos was built for this world. They really was, it was like built for this world of like competing DeFi protocols, interoperability, consensus level attacks, fault isolation between consensus systems. Like this is what we built for. And it's really exciting to start to see it like manifesting in reality. And, you know, Sommelier is a piece of that picture, but, you know, that's the joyous thing of having been working in this space for so long, you know, I've contributed and put so many ideas out there. And so many things are being built by different people who I've worked with in the past, who are like trying to solve like all of the different aspects of this sort of complex holistic system. And so I get to focus on Sommelier and like somewhat narrower constraint problem set, but, you know, it's just, it's really fun.

Anna Rose (41:10):
There's been a lot of work put into it. So I actually got a chance to speak with Dev from Osmosis just yesterday and told him that I was interviewing you. And he actually gave me a few questions. So I'm actually going to ask some questions if you're up for it. The first one's about kind of touching on the MEV and Uniswap V3, and then the others are a little bit more Cosmos-focused, but one of his questions was like, what do you think about flash LP-ing as a new MEV problem with uni V3 on other chains? And I'm guessing he's meaning like the L2s.

Zaki Manian (41:42):
Okay. So first things first, this is what I mean about the final form of concentrated liquidity being really unknown, right? And this may end up at being the final form of concentrated liquidity and like building some stuff around this is an active project inside of Sommelier right now, I've got to chug through a bunch of bugs before I can start building some stuff.

Anna Rose (42:05):
I want to create the flash LP-ing or like, what part are you building?

Zaki Manian (42:09):
So one of the things that we do at Sommelier it's a part of our process is every single idea that we have. We first build like a single Ethereum address version of it, just to like, see how it works in production. It's only after we've kind of run it for a couple, a little bit of time. It's just like that. We try to like build it as a distributed system. So we typically build prototypes as a distributed system. I talked about earlier about this like rebalanced costs, sort of overwhelming thing that hangs over, you know, providing liquidity in Uniswap V3 type setting. So what is the world in which that rebalanced costs essentially is nearly negligible the world in which that rebalanced cost is nearly negligible, is you see in the mempool, a trade coming in, you provide one tick of liquidity, exactly where that trade is going to land, because you can calculate all of this. You provide one tick of liquidity there, and then you will try it in the same block, or the end of the block, like, or you could do like a flash blocks bundle to test this, right. You know, like bundles the trade with putting in the liquidity, executing on chain and take the liquidity out and like this, you know, your inventory has now changed in a very predictable way. You know, from a user's point of view, this is great. This is not like a sandwich attack. This is you get lower slippage than you thought, you know, you get better prices than you expected on the trade, but gas prices being what they are on Ethereum L1, you know, this has happened. This has been done. We've seen this in real world, but it really only works in like north of a million dollar trades. And that's like a relatively large and infrequent trade size. So you see that people have done experiments with this, but nobody has really, nobody seems to be doing this like on a regular ongoing basis on L1, but on L2

Anna Rose (44:03):
Gas prices are cheap. MEV is figured out it's like a wild west MEV because it's not,

Zaki Manian (44:10):
Well right now you have a sequencer. Most of the L2s have a single seat sequencer. There's like only one position to do MEV and they're going to do what they're going to do with it. And so the other thing that would be really tricky if this turned out to be the sort of dominant modality of Uniswap and L2, is it's going make the whole routing world like, cause most trades through AMMs are not done like directly on the Uniswap interface. They go through 1inch, they go through CowSwap, they go through I think Matcha, Matcha is the 0x product. You have these routers and the routers are looking at what is the liquidity available for the trade and then like routing to the low slippage. But if this like flash LP-ing thing kicks off, you don't actually know because it's not on chain, how much liquidity is actually available anymore. And, you know, it's sort of like an interesting question about like whether or not this ends up being the sort of steady state at which anything operates. And that would be a tricky thing to also to decentralize because you know, you have a lot of, you know, just latency for a centralized player is, is a huge advantage there, but I don't think it's impossible to decentralize that. It's sort of an interesting question of whether or not but like right now, what we have, we have one system that does concentrated liquidity. It's running in a high gas environment with most of its liquidity in a high gas environment. And so we know we have three months of data about what that looks like and that's it. That's like, that's what we know right now. And the future is concentrated liquidity in low gas environments, you know, a lot more places and like, you know, not in a crazy bull market like bear markets will occur. So we still have a lot to learn. And this is why these things are such a interesting research and development.

Anna Rose (46:12):
We just said that like on the actual other chain or on the L2 the MEV is not an issue, but like, where is the issue of this is the MEV as you're bringing it back onto the L1 after a flash LP, like no eh?

Zaki Manian (46:27):
No, there's no issue here. This is not a problem. This is like basically a good thing. Flash LP-ing is not an attack. Flash LP-ing is I delivered the user exactly what they want, which is a better price than they were expecting to get, you know, I wanted to go buy some, some tokens turns out they were on sale. I got a better price than I anticipated. Flash LP-ing is amazing for users, it sort of poses these challenges, how AMMs are integrated into the rest of the ecosystem. And we haven't even really started to explore those challenges because of the way because of the way Uniswap, V3 is operating only in this like high, high gas world right now. But as we start seeing it in constraint liquidity from SushiSwap and from Uniswap in these low gas environments now suddenly like, what does this even look like? But then it also like closes these challenges for the ecosystem. Because 1inch that wants to do is like, you know, you want to sell some ETH or USDC. It wants to look at all of the different AMMs it could possibly route to and other systems that are not AMM based and get an idea of what price would be best. But if there's a flash LP, you don't actually know like, cause it's not yet on-chain, how much liquidity you actually have access to for the trade. So it's going to make all of these systems like behave in different ways if this is what the sort of final state of, or like what the next state of concentrated liquidity and low gas environments looks like. But like also, you know, the other thing to point out is that like, in the most sort of extreme version of this scenario, but also everything rebalancing, all rebalancers are obsolete. Like rebalancing becomes completely obsolete because there is no strategy that you can engage with the rebalancer that is going to beat out flash liquidity.

Anna Rose (48:18):
Okay. I have two or three more questions again from Dev. So yeah, another one was, what does the future of cross chain trade routing or aggregators look like? Would you need hops or not kind of?

Zaki Manian (48:34):
It's sort of an interesting question as to like, again, what does this look like in its final form? And it also is a question of how do people use AMX? You know, one of the things you could build, like sort of on top of the Sommelier stack and people are building on top of other stacks, is this idea of routers. Like I want to buy some Sushi tokens or like some Uni or Link or whatever I want to not only ask the question, what AMM on the current L1 that I'm on or current L2 that I'm on offers the best price. But can I look at the entire world factor in like all of the L1s look at the entire internet of blockchains that has emerged? I don't mean just Cosmos. I mean, like all of everything in Polygon, Avalanche, Solana, all of these things and say, including execution costs, you know, gas costs moving over bridges, all of these things, you know, what is best for me, but frequently people trade into tokens because they want to do something like, you know, it's like, I want to buy some Near tokens and stake them. Like I did this recently. I bought some Near tokens on SushiSwap, move them over the Rainbow Bridge and I staked them. And so routing of trades is like something that's like, I think a fairly constrained problem and potentially manageable. But now if you want to consider like an entire workflow like that, you know, if I was doing that workflow and like, I end up with Near tokens on like Avalanche, I'm like, no, this doesn't help me because like, I need to go back over the Rainbow Bridge. Like, I've come across two bridges, this wasn't I think like one of the tricky things that is going to be there is like, you have to consider entire workflows in these sorts of solutions and I don't know how effective that's going to be and this is where a thing like cross chain order routing via something like natively built in as like an IBC protocol, which is something that we've been thinking about in Cosmos for many years is like potentially like the right way of doing this because you can like plug into the protocol exactly like what you want from an entire workflow point of view. Like I want these tokens traded and then delivered to this chain because I want to use them for part two of my workflow. And potentially, you know, things that are expressible in the Cosmos world you could program into an Agoric-type chain or an Cosmwasm-type chain, like the entire workflow. I know just like, step one, step two, step three and step four. And that's all like all programmatically executed and that's kind of what the world that we've been building for for a very long time. And you know, it's, it sort of seems within grasp now, but like, yeah. So, you know, this is one of the reasons why we didn't build like a trade routing protocol for Sommelier because it's like, it's unclear how to think about that in terms of like the entire workflow today.

Anna Rose (51:45):
What are the cross-chain privacy guarantees that in general folks should be aiming to design? This is very on-brand for this show.

Zaki Manian (51:54):
But like holy smokes, a hard problem. Like the best we can do right now is like, you can have these like privacy zones, right? And by that, I mean, like maybe a Cosmos zone, but just like conceptually, like you have these private domains, but these private domains, you see what goes into the private domain, you see what comes out of the private domain. And one of the things that's important in general, when you're constructing these systems is to actually give people reasons to like, sort of hold funds in the private domain for a longer period of time. And so you're starting to see a lot of that being applied in things like Anoma and Penumbra and the Cosmos ecosystem. And maybe in other ecosystems that I don't know about. So you could like LP or stake privately also inside of Penumbra, you can do similar things inside of Anoma that, you know, gives you more sort of temporal variability of how long people stay in the private space.

Anna Rose (52:57):
But this, I think this question really is focused more on this cross-chain. Like the zone being private is cool, but like, is there a way to do it across?

Zaki Manian (53:06):
I was talking with Henry de Valence last night about this, what he thinks. And I think I agree with this is there's this like fundamental trade-off. So one of the properties of Cosmos that we really value is this idea of like what we call fault isolation. ie like Osmosis can experience some sort of catastrophic chain failure and halt, like, you know, live this fault, et cetera, like what we saw with Solana recently, but like the rest of the Cosmos ecosystem keeps going like, and doesn't care. Like, you know, liveness is preserved across many blockchains and you get resilience against faults from that. And you know, that fault isolation property is at odds with any sort of cross chain privacy. I think in a very deep way that you can either have fault isolation or you can have cross-chain privacy, and it's like maybe a dial that you can turn back. This is, again, this is, this is Henry's phrasing really that I'm stealing, but I think it's the correct answer to the problem.

Anna Rose (54:10):
What about Sommelier itself? Do you want to have any sort of privacy tech in there, or is it almost also antithetical to what you're trying to do?

Zaki Manian (54:19):
Oh no, it would be, so it would be a huge advantage to the system. If we could have like strong correctness guarantees as well, preserving privacy as long as possible, because it would make it harder for people to front us. You know, the system that sort of maturity has a huge front running problem. Cause what, like, what we want to have is preserved decentralization, which requires multiple validators inputs before anything gets executed on the chain. But like you can foresee what those validators are likely to do. All the inputs are being gathered and might run ahead of them and executed. So we have this huge front running problem to what we're doing with sellers where privacy is the solution. The only plausible answer that I really see there is enclaves, like SGX type things.

Anna Rose (55:08):
I'm saying this for on behalf of my ZK-focused audience here, but okay. So you think that's the only way to do it? You couldn't do it cryptographically.

Zaki Manian (55:16):
Maybe, maybe

Anna Rose (55:18):
I realized I'm supposed to not have an opinion here, but

Zaki Manian (55:21):
It's tricky. Right. enclaves offer some like appealing properties that are like really hard to get in other ways. And, you know, in terms of having like computing over encrypted data. And so I do think that like, that may be where we end up for something like Sommelier. But yeah, I'm interested in that. I think we are inevitably going to have to do privacy tech inside of Sommelier the long run, but like right now I'm mostly looking in the enclave direction.

Anna Rose (55:55):
Cool. Well, thank you so much for coming on the show and exploring Sommelier with me, I have a way better understanding of what this is. And also I think it was kind of nice to hear also like the evolving vision for this kind of interchain communication space, how it looks now versus, what how it looked maybe like two years ago. Yeah. So thanks again.

Zaki Manian (56:17):
Yeah. I mean, we are just at the beginning of interchain communication, right? It's so early, we were like, assume L1s are boring now. And like interchain communication is where it's at like five years ago. But like over 2022, 2023, like we should probably have like most of the L1s that we're going to have for awhile. We are as always are in sort of Cosmos in my work, trying to be forward-looking but you know, excited to keep building.

Anna Rose (56:46):
Cool. Well, thanks again. And I want to say thank you to the podcast producer, Tanya, the podcast editor Henrik, and to our listeners. Thanks for listening.

